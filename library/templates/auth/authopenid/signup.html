{% extends "sidebar.html" %}
{% load i18n %}
{% block title %}{% trans "Sign up" %}{% endblock %}
{% block header %}{% trans "Sign up" %}{% endblock %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}library/auth.css" ></link>
<script type="text/javascript">
jQuery(document).ready(function() {
        $("#auth-what-is-openid").hide();
        $('.auth-what-is-openid-link').click(function() {
                $("#auth-what-is-openid").fadeIn('normal');
            }
            )
            
		$('#auth-what-is-openid').click(function(){
			$('#auth-what-is-openid').fadeOut('normal');
		})
    });
</script>

{% endblock head %}

{% block sidebar %}
  <h2>{% trans "Two ways to join" %}:</h2>
  <ul>
    <li><h3><a href="#openid">{% trans "Use OpenID" %}</a></h3> 
    {% trans "Just enter your OpenID and we'll link a SocialBooks account to it." %}
    <p><a href="{% url openid %}">{% trans "What is OpenID" %}</a>?</p></li>
    <li><h3>{% trans "Don't have an OpenID?" %}</h3>  
    <p>{% trans "Sign up with a username and password just for SocialBooks. <!-- trans: instead of using OpenID -->" %}</p>

    </li>
  </ul>
{% endblock sidebar %}

{% block main %}

<div id="signup">
	<p id="signup-about">
	{% blocktrans %}
	  Before you can start reading with SocialBooks, you need to sign up so we can
	  store your books in your private library.
	{% endblocktrans %}
	</p>

    {% if form.errors %}
	<div id="signup-messages">
	    <p class="auth-message">{% trans "Please correct errors below" %}:</p>
	    <ul>
		    {% if form.username.errors %} 
		    <li><span class="auth-error">{{ form.username.errors|join:", " }}</span></li>
		    {% endif %}
		    
		    {% if form.email.errors %} 
		    <li><span class="auth-error">{{ form.email.errors|join:", " }}</span></li>
		    {% endif %}
		    
		    {% if form.password2.errors %} 
		    <li><span class="auth-error">{{ form.password2.errors|join:", " }}</span></li>
		    {% endif %}
		</ul>
	</div>
	{% endif %}
	
	
	<div id="signup-forms">
		<div id="signup-local">
			<p>{% trans "If you're not sure what to do, just fill out this form" %}:</p>
			
		    <form action="{{ action }}" method="post" accept-charset="utf-8" class="auth-form">	
			<fieldset>
				<legend>{% trans "Sign up <!-- trans: on SocialBooks itself rather than via OpenID -->" %}</legend>
				
				<label for="id_username">{% trans "Username" %}:</label>{{ form.username }}
				
				<label for="id_email">{% trans "Email" %}:</label>{{ form.email }}
				<label for="id_password1">{% trans "Password" %}:</label>{{ form.password1 }}
				<label for="id_password2">{% trans "Confirm password" %}:</label>{{ form.password2 }}
				
				<input type="submit" value="{% trans "Sign up" %}" name="register_local"/>
			</fieldset>
			</form>
		</div>
	
		<div id="signup-openid">
			<p>{% trans "If you have an OpenID, sign up here" %}:</p>
			<form name="fopenid" action="{{ action_signin }}" method="post" class="auth-form">
				<fieldset>
					<legend><img src="{{ MEDIA_URL }}library/openid-logo.png" alt="{{ _("Use my OpenID")}}" /></legend>
					{{ form2.openid_url }}
					<input name="bsignin" type="submit" value="{{ _("Sign up with OpenID") }}" />
					<p style="color:gray">({% trans "If you have a Yahoo account, try typing <em>yahoo.com</em> here." %})</p>
					<a href="#openid" class="auth-what-is-openid-link">{% trans "What's this?" %}</a>          
				</fieldset>
			</form>
			</div>
			{% include "includes/openid.html" %}

		</div>
	
	</div>
</div>
{% endblock %}
